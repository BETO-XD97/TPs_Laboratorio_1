/*
 ============================================================================
 Name        : TP_1.c
 Author      : Roberto Rocabado
 Version     :
 Copyright   : Your copyright notice
 Description : Hello World in C, Ansi-style
 DNI: 40731247
 Division: D
 ============================================================================
 */

#include <stdio.h>
#include <stdlib.h>
#include "validaciones.h"
#include "calculos.h"

int main(void) {
	setbuf(stdout, NULL);
	//VARIABLES GENERALES
	int opcion;
	int kilometros;
	float precioLatam;
	float precioAerolineas;
	float descuento = 10;
	float interes = 15;
	float bitcoinPrecio = 4770233.18;//El precio lo muestro con 5 decimales

	//VARIABLES DE CALCULO DE LATAM
	float debitoLatam;
	float creditoLatam;
	float bitcoinLatam;
	float precioUnitLatam;

	//VARIABLES DE CALCULO DE AEROLINEAS
	float debitoAerolineas;
	float creditoAerolineas;
	float bitcoinAerolineas;
	float precioUnitAerolineas;

	//DIFERENCIA DE PRECIOS
	float difPrecios;

	//MENU
	do
	{
		printf("1- Ingrese los KMs. \n"
				"2- Ingrese el precio del vuelo. \n"
				"3- Calcular los precios. \n"
				"4- Mostrar los precios. \n"
				"5- Carga forzada de datos. \n"
				"6- Salir. \n"
				"\nELEGIR SU OPCION: ");
		fflush(stdin);
		scanf("%d", &opcion);

		//OPCIONES
		switch(opcion){
			//Ingreso de kilometros
			case 1:
				printf("\nIngrese los kilometros: ");
				scanf("%d", &kilometros);
				kilometros = valKilometros(kilometros);
				break;
			//Ingreso de precios
			case 2:
				printf("\nIngrese el precio de vuelo de LATAM: ");
				scanf("%f", &precioLatam);
				precioLatam = valPrecioLatam(precioLatam);
				printf("\nIngrese el precio de vuelo de Aerolineas: ");
				scanf("%f", &precioAerolineas);
				precioAerolineas = valPrecioAerolineas(precioAerolineas);
				break;
			//Calculos de precios
			case 3:
				if(precioLatam != 0 && precioAerolineas != 0 && kilometros != 0)
				{
					//Calculos de Latam
					debitoLatam = CalculoDebito(precioLatam, descuento);
					creditoLatam = CalculoCredito(precioLatam, interes);
					bitcoinLatam = CalculoBitcoin(precioLatam, bitcoinPrecio);
					precioUnitLatam = CalculoPreUnit(precioLatam, kilometros);

					//Calculos de Aerolineas
					debitoAerolineas = CalculoDebito(precioAerolineas, descuento);
					creditoAerolineas = CalculoCredito(precioAerolineas, interes);//
					bitcoinAerolineas = CalculoBitcoin(precioAerolineas, bitcoinPrecio);
					precioUnitAerolineas = CalculoPreUnit(precioAerolineas, kilometros);

					//Diferencia de precios
					difPrecios = DiferenciaPrecios(precioLatam, precioAerolineas);

					printf("\nLos datos fueron calculados con EXITO...!!!");

				} else {
					printf("\nLos datos ingresados NO son validos por lo tanto no se puede calcular...");
				}
				break;
			//Muestra de resultados
			case 4:
				printf( "\nKMs ingresados: %d"
						"\n"
						"\nPrecio de Latam: %.2f"
						"\na)Precio con tarjeta de debito es de: %.2f"
						"\nb)Precio con tarjeta de credito es de: %.2f"
						"\nc)Precio pagando con bitcoin es de: %.7f BTC"
						"\nd)Precio unitario: %.2f p/km"
						"\n"
						"\nPrecio de Aerolineas: %.2f"
						"\n"
						"\na)Precio con tarjeta de debito es de: %.2f"
						"\nb)Precio con tarjeta de credito es de: %.2f"
						"\nc)Precio pagando con bitcoin es de: %.7f BTC"
						"\nd)Precio unitario: %.2f p/km"
						"\n"
						"\nDiferencia de precios ingresada (Latam-Aerolineas):  %.2f"
						"\n ", kilometros, precioLatam, debitoLatam, creditoLatam, bitcoinLatam, precioUnitLatam, precioAerolineas, debitoAerolineas, creditoAerolineas, bitcoinAerolineas, precioUnitAerolineas, difPrecios);
				break;
			//Carga forzada de datos
			case 5:
				kilometros = 7090;
				precioLatam = 159339;
				precioAerolineas = 162965;

				debitoLatam = CalculoDebito(precioLatam, descuento);
				printf("\nEl descuento de precio latam es: %.2f", debitoLatam);
				debitoAerolineas = CalculoDebito(precioAerolineas, descuento);
				printf("\nEL descuento de precio aerolineas es: %.2f", debitoAerolineas);

				creditoAerolineas = CalculoCredito(precioAerolineas, interes);
				printf("\nEl recargo de precio de aerolineas es: %.2f", creditoAerolineas);
				creditoLatam = CalculoCredito(precioLatam, interes);
				printf("\nEl recargo de precio latam es: %.2f", creditoLatam);

				bitcoinLatam =  CalculoBitcoin(precioLatam, bitcoinPrecio);
				printf("\nPrecio final pagando de latam con bitcoin: %.6f", bitcoinLatam);
				bitcoinAerolineas = CalculoBitcoin(precioAerolineas, bitcoinPrecio);
				printf("\nPrecio final pagando de aerolineas con bitcoin es: %.7f", bitcoinAerolineas);

				precioUnitAerolineas = CalculoPreUnit(precioAerolineas, kilometros);
				printf("\nEl precio unitario de aerolineas es de: %.2f",precioUnitAerolineas);
				precioUnitLatam = CalculoPreUnit(precioLatam, kilometros);
				printf("\nEl precio unitario de latam es de: %.2f", precioUnitLatam);

				difPrecios = DiferenciaPrecios(precioLatam, precioAerolineas);
				printf("\nLa diferencia de precios es de: %.2f", difPrecios);

				break;
			//Salida del programa
			case 6:
				printf("Gracias por usar nuestro servicio.!!!");
				break;
			//En caso de marcar una opcion incorrecto
			default:
				printf("Error! Reingrese una opcion: \n");
				break;
		}
		printf("\n");
	}while(opcion !=6);
	return 0;
}
